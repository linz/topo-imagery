// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
{
	"name": "topo-imagery-dev",
	"context": "..",
	"dockerFile": "Dockerfile",
	"customizations": {
		"vscode": {
			"settings": {
				"editor.codeActionsOnSave": {
					"source.organizeImports": true
				},
				"python.defaultInterpreterPath": "${containerWorkspaceFolder}/.venv/bin/python3.10",
				"python.formatting.blackPath": "${containerWorkspaceFolder}/.venv/bin/black",
				"python.linting.mypyPath": "${containerWorkspaceFolder}/.venv/bin/mypy",
				"python.linting.pylintPath": "${containerWorkspaceFolder}/.venv/bin/pylint",
				"python.formatting.provider": "black",
				"python.testing.pytestEnabled": true,
				"python.linting.enabled": true,
				"python.linting.pylintEnabled": true,
				"editor.formatOnSave": true
			},
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance",
				"njpwerner.autodocstring"
			]
		}
	},
	"postStartCommand": "bash ./.devcontainer/post_start.sh ${containerWorkspaceFolder}",
	"postCreateCommand": "bash ./.devcontainer/post_create.sh",
	"mounts": [
		"source=${env:HOME}${env:USERPROFILE}/.aws,target=/root/.aws,type=bind",
		"source=${localEnv:HOME}/.bashrc,target=/root/.bashrc,type=bind,consistency=cached"
		//"source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
	],
	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {}
	}
}